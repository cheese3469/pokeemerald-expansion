raw`PetalburgWoods_MapScripts::
	.byte 0

PetalburgWoods_EventScript_DevonResearcherLeft::
	lockall
	call PetalburgWoods_EventScript_DevonResearcherIntro
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherApproachPlayerLeft
	waitmovement 0
	msgbox PetalburgWoods_Text_HaveYouSeenShroomish, MSGBOX_DEFAULT
	closemessage
	playbgm MUS_ENCOUNTER_AQUA, FALSE
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaEntrance
	waitmovement 0
	msgbox PetalburgWoods_Text_IWasGoingToAmbushYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaApproachResearcherLeft
	waitmovement 0
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox PetalburgWoods_Text_HandOverThosePapers, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherFleeToPlayerLeft
	waitmovement 0
	msgbox PetalburgWoods_Text_YouHaveToHelpMe, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaApproachPlayer
	waitmovement 0
	msgbox PetalburgWoods_Text_NoOneCrossesTeamAqua, MSGBOX_DEFAULT
	trainerbattle_no_intro TRAINER_GRUNT_PETALBURG_WOODS, PetalburgWoods_Text_YoureKiddingMe
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaBackOff
	waitmovement 0
	call PetalburgWoods_EventScript_DevonResearcherPostBattle
	applymovement LOCALID_PLAYER, PetalburgWoods_Movement_WatchResearcherLeave
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherExitLeft
	waitmovement 0
	goto PetalburgWoods_EventScript_RemoveDevonResearcher
	end

PetalburgWoods_EventScript_DevonResearcherRight::
	lockall
	call PetalburgWoods_EventScript_DevonResearcherIntro
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherApproachPlayerRight
	waitmovement 0
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterLeft
	waitmovement 0
	msgbox PetalburgWoods_Text_HaveYouSeenShroomish, MSGBOX_DEFAULT
	closemessage
	playbgm MUS_ENCOUNTER_AQUA, FALSE
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaEntrance
	waitmovement 0
	msgbox PetalburgWoods_Text_IWasGoingToAmbushYou, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaApproachResearcherRight
	waitmovement 0
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox PetalburgWoods_Text_HandOverThosePapers, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherFleeToPlayerRight
	waitmovement 0
	msgbox PetalburgWoods_Text_YouHaveToHelpMe, MSGBOX_DEFAULT
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterUp
	waitmovement 0
	msgbox PetalburgWoods_Text_NoOneCrossesTeamAqua, MSGBOX_DEFAULT
	trainerbattle_no_intro TRAINER_GRUNT_PETALBURG_WOODS, PetalburgWoods_Text_YoureKiddingMe
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaBackOff
	waitmovement 0
	call PetalburgWoods_EventScript_DevonResearcherPostBattle
	applymovement LOCALID_PLAYER, PetalburgWoods_Movement_WatchResearcherLeave
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherExitRight
	waitmovement 0
	goto PetalburgWoods_EventScript_RemoveDevonResearcher
	end

PetalburgWoods_EventScript_DevonResearcherIntro::
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherLookAround
	waitmovement 0
	msgbox PetalburgWoods_Text_NotAOneToBeFound, MSGBOX_DEFAULT
	closemessage
	return

PetalburgWoods_EventScript_DevonResearcherPostBattle::
	msgbox PetalburgWoods_Text_YouveGotSomeNerve, MSGBOX_DEFAULT
	closemessage
	applymovement LOCALID_PETALBURG_WOODS_GRUNT, PetalburgWoods_Movement_AquaRunAway
	waitmovement 0
	removeobject LOCALID_PETALBURG_WOODS_GRUNT
	applymovement LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterDown
	waitmovement 0
	msgbox PetalburgWoods_Text_ThatWasAwfullyClose, MSGBOX_DEFAULT
	giveitem ITEM_GREAT_BALL
	goto_if_eq VAR_RESULT, FALSE, PetalburgWoods_EventScript_BagFull
	goto PetalburgWoods_EventScript_DevonResearcherFinish
	end

PetalburgWoods_EventScript_BagFull::
	msgbox PetalburgWoods_Text_YoureLoadedWithItems, MSGBOX_DEFAULT
	goto PetalburgWoods_EventScript_DevonResearcherFinish
	end

PetalburgWoods_EventScript_DevonResearcherFinish::
	msgbox PetalburgWoods_Text_TeamAquaAfterSomethingInRustboro, MSGBOX_DEFAULT
	applymovement LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE, PetalburgWoods_Movement_DevonResearcherStartExit
	waitmovement 0
	msgbox PetalburgWoods_Text_ICantBeWastingTime, MSGBOX_DEFAULT
	closemessage
	return

PetalburgWoods_EventScript_RemoveDevonResearcher::
	removeobject LOCALID_PETALBURG_WOODS_DEVON_EMPLOYEE
	setvar VAR_PETALBURG_WOODS_STATE, 1
	releaseall
	end

PetalburgWoods_Movement_DevonResearcherLookAround:
	face_up
	delay_16
	delay_4
	face_right
	delay_16
	delay_8
	face_left
	delay_16
	delay_8
	face_down
	delay_16
	face_right
	delay_16
	delay_8
	face_up
	delay_16
	step_end

PetalburgWoods_Movement_DevonResearcherExitLeft:
	walk_fast_right
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	step_end

PetalburgWoods_Movement_DevonResearcherApproachPlayerLeft:
	delay_16
	face_player
	walk_down
	walk_down
	step_end

PetalburgWoods_Movement_DevonResearcherApproachPlayerRight:
	delay_16
	face_player
	walk_down
	walk_down
	walk_down
	walk_in_place_faster_right
	step_end

PetalburgWoods_Movement_DevonResearcherExitRight:
	walk_fast_left
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	step_end

PetalburgWoods_Movement_WatchResearcherLeave:
	delay_16
	delay_16
	walk_in_place_faster_up
	step_end

PetalburgWoods_Movement_DevonResearcherFleeToPlayerLeft:
	walk_fast_right
	walk_fast_down
	walk_fast_down
	walk_fast_left
	walk_in_place_faster_up
	step_end

PetalburgWoods_Movement_DevonResearcherFleeToPlayerRight:
	walk_fast_down
	walk_fast_right
	walk_in_place_faster_up
	step_end

PetalburgWoods_Movement_DevonResearcherStartExit:
	walk_in_place_faster_down
	delay_16
	delay_16
	delay_16
	delay_16
	delay_16
	face_up
	step_end

PetalburgWoods_Movement_AquaApproachResearcherLeft:
	walk_fast_down
	walk_fast_down
	step_end

PetalburgWoods_Movement_AquaBackOff:
	lock_facing_direction
	walk_up
	unlock_facing_direction
	step_end

PetalburgWoods_Movement_AquaRunAway:
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	walk_fast_up
	delay_16
	delay_16
	step_end

PetalburgWoods_Movement_AquaApproachResearcherRight:
	walk_fast_down
	walk_fast_down
	walk_fast_down
	step_end

PetalburgWoods_Movement_AquaEntrance:
	walk_down
	walk_down
	delay_16
	delay_16
	step_end

PetalburgWoods_Movement_AquaApproachPlayer:
	walk_down
	step_end

PetalburgWoods_EventScript_Boy1::
	msgbox PetalburgWoods_Text_StayOutOfTallGrass, MSGBOX_NPC
	end

PetalburgWoods_EventScript_Boy2::
	msgbox PetalburgWoods_Text_HiddenItemsExplanation, MSGBOX_NPC
	end

PetalburgWoods_EventScript_Sign1::
	msgbox PetalburgWoods_Text_TrainerTipsExperience, MSGBOX_SIGN
	end

PetalburgWoods_EventScript_Lyle::
	trainerbattle_single TRAINER_LYLE, PetalburgWoods_Text_GoBugPokemonTeam, PetalburgWoods_Text_ICouldntWin
	msgbox PetalburgWoods_Text_ImOutOfPokeBalls, MSGBOX_AUTOCLOSE
	end

PetalburgWoods_EventScript_James::
	trainerbattle_single TRAINER_JAMES, PetalburgWoods_Text_InstantlyPopularWithBugPokemon, PetalburgWoods_Text_CantBePopularIfILose
	msgbox PetalburgWoods_Text_PeopleRespectYou, MSGBOX_AUTOCLOSE
	end

PetalburgWoods_Text_NotAOneToBeFound:
	.string "Hmmm…\n"
	.string "Not a one to be found…$"

PetalburgWoods_Text_HaveYouSeenShroomish:
	.string "Hello, have you seen any POKéMON\n"
	.string "called SHROOMISH around here?\p"
	.string "I really love that POKéMON.$"

PetalburgWoods_Text_IWasGoingToAmbushYou:
	.string "I was going to ambush you, but you\n"
	.string "had to dawdle in PETALBURG WOODS\l"
	.string "forever, didn't you?\p"
	.string "I got sick of waiting, so here I am!$"

PetalburgWoods_Text_HandOverThosePapers:
	.string "You! DEVON RESEARCHER!\p"
	.string "Hand over those papers!$"

PetalburgWoods_Text_YouHaveToHelpMe:
	.string "Aiyeeeh!\p"
	.string "You're a POKéMON TRAINER, aren't you?\n"
	.string "You've got to help me, please!$"

PetalburgWoods_Text_NoOneCrossesTeamAqua:
	.string "Hunh? What do you think you're doing?\n"
	.string "What, you're going to protect him?\p"
	.string "No one who crosses TEAM AQUA\n"
	.string "gets any mercy, not even a kid!\p"
	.string "Come on and battle me!$"

PetalburgWoods_Text_YoureKiddingMe:
	.string "You're kidding me! You're tough!$"

PetalburgWoods_Text_YouveGotSomeNerve:
	.string "Grrr… You've got some nerve\n"
	.string "meddling with TEAM AQUA!\l"
	.string "Come on and battle me again!\p"
	.string "I wish I could say that, but I'm out of\n"
	.string "POKéMON…\p"
	.string "And, hey, we of TEAM AQUA are also\n"
	.string "after something in RUSTBORO.\p"
	.string "I'll let you go today!$"

PetalburgWoods_Text_ThatWasAwfullyClose:
	.string "Whew…\n"
	.string "That was awfully close!\p"
	.string "Thanks to you, he didn't rob me of\n"
	.string "these important papers.\p"
	.string "I know, I'll give you a GREAT BALL as\n"
	.string "my thanks!$"

PetalburgWoods_Text_TeamAquaAfterSomethingInRustboro:
	.string "Didn't that TEAM AQUA thug say\n"
	.string "they were after something in\l"
	.string "RUSTBORO, too?$"

PetalburgWoods_Text_ICantBeWastingTime:
	.string "Uh-oh! It's a crisis!\n"
	.string "I can't be wasting time!$"

PetalburgWoods_Text_YoureLoadedWithItems:
	.string "You're loaded with items.\n"
	.string "I can't give you this GREAT BALL.$"

PetalburgWoods_Text_GoBugPokemonTeam:
	.string "I caught a whole bunch of POKéMON!\p"
	.string "Go, go, go!\n"
	.string "My BUG POKéMON team!$"

PetalburgWoods_Text_ICouldntWin:
	.string "I have all these POKéMON,\n"
	.string "but I couldn't win…$"

PetalburgWoods_Text_ImOutOfPokeBalls:
	.string "I caught a bunch of POKéMON.\n"
	.string "Now I'm out of POKé BALLS.$"

PetalburgWoods_Text_InstantlyPopularWithBugPokemon:
	.string "If you take BUG POKéMON to school,\n"
	.string "you get to be instantly popular!$"

PetalburgWoods_Text_CantBePopularIfILose:
	.string "I can't be popular if I lose.$"

PetalburgWoods_Text_PeopleRespectYou:
	.string "If you have a big BUG POKéMON,\n"
	.string "people respect you for it.$"

PetalburgWoods_Text_StayOutOfTallGrass:
	.string "Yo, there!\n"
	.string "Your POKéMON doing okay?\p"
	.string "If your POKéMON are weak and you want\n"
	.string "to avoid battles, you should stay out\l"
	.string "of tall grass.$"

PetalburgWoods_Text_HiddenItemsExplanation:
	.string "Sometimes, there are things on the\n"
	.string "ground even if you can't see them.\p"
	.string "That's why I always check where I'm\n"
	.string "walking.$"

PetalburgWoods_Text_TrainerTipsExperience:
	.string "TRAINER TIPS\p"
	.string "Any POKéMON that appears even once\n"
	.string "in a battle is awarded EXP Points.\p"
	.string "To raise a weak POKéMON, put it at the\n"
	.string "left of the team list.\p"
	.string "As soon as a battle starts, switch it\n"
	.string "out. It will earn EXP Points without\l"
	.string "being exposed to any harm.$"

`

script PetalburgWoods_EventScript_Dustin {
	trainerbattle_single(TRAINER_DUSTIN, PetalburgWoods_Text_DustinIntro, PetalburgWoods_Text_DustinDefeat)
	msgbox(PetalburgWoods_Text_DustinPostBattle, MSGBOX_AUTOCLOSE)
	end 
}
text PetalburgWoods_Text_DustinIntro {
	"Hey! I was playing with that!$"
    }

text PetalburgWoods_Text_DustinDefeat {
	"Fine, you can have a turn..."
    }

text PetalburgWoods_Text_DustinPostBattle {
	"Do you want to play in the trees with me?$"
    }

script PetalburgWoods_EventScript_Kyler {
	trainerbattle_single(TRAINER_KYLER, PetalburgWoods_Text_KylerIntro, PetalburgWoods_Text_KylerDefeat)
	msgbox(PetalburgWoods_Text_KylerPostBattle, MSGBOX_AUTOCLOSE)
	end 
}
text PetalburgWoods_Text_KylerIntro {
	"Do you want to hear some bug facts?$"
    }

text PetalburgWoods_Text_KylerDefeat {
	"Okay, no bug facts this time."
    }

text PetalburgWoods_Text_KylerPostBattle {
	"I really like bugs.$"
    }

script PetalburgWoods_EventScript_Frank {
	trainerbattle_single(TRAINER_FRANK, PetalburgWoods_Text_FrankIntro, PetalburgWoods_Text_FrankDefeat)
	msgbox(PetalburgWoods_Text_FrankPostBattle, MSGBOX_AUTOCLOSE)
	end 
}
text PetalburgWoods_Text_FrankIntro {
	"Me and my bugs are ready to rumble!$"
    }

text PetalburgWoods_Text_FrankDefeat {
	"Uh oh, my bugs got tumbled!"
    }

text PetalburgWoods_Text_FrankPostBattle {
	"My bugs are rough and tough!$"
    }

script PetalburgWoods_EventScript_Lily {
	trainerbattle_single(TRAINER_LILY, PetalburgWoods_Text_LilyIntro, PetalburgWoods_Text_LilyDefeat, PetalburgWoods_EventScript_MiracleSeed)
	if (flag(FLAG_RECEIVED_MIRACLE_SEED) == FALSE) {
		goto (PetalburgWoods_EventScript_MiracleSeed)
	}
	else {
		msgbox(PetalburgWoods_Text_LilyPostBattle, MSGBOX_AUTOCLOSE)
	}
	end
}

text PetalburgWoods_Text_LilyIntro {
	"Look at this cool seed I found!\n"
	"You can have it if you battle with me!$"
}

text PetalburgWoods_Text_LilyDefeat {
	"Thanks for fighting, hope you enjoy\n"
	"the cool seed!$"
}

text PetalburgWoods_Text_LilyPostBattle {
	"Don't worry, there are plenty more\n"
	"cool seeds I can find!$"
}

script PetalburgWoods_EventScript_MiracleSeed {
	msgbox (PetalburgWoods_Text_HaveThisSeed, MSGBOX_AUTOCLOSE)
	giveitem (ITEM_MIRACLE_SEED)
	if (var(VAR_RESULT) == FALSE) {
		goto (Common_EventScript_ShowBagIsFull)
	}
	else {
		setflag (FLAG_RECEIVED_MIRACLE_SEED)
		msgbox (PetalburgWoods_Text_TryBattlingOthers, MSGBOX_AUTOCLOSE)
	}
	end
}

text PetalburgWoods_Text_HaveThisSeed {
	"Here, take this cool seed I found,\n"
	"it's a MIRACLE SEED. If a POKéMON\l"
	"holds that item, its GRASS-type moves\l"
	"become stronger.$"
}

text PetalburgWoods_Text_TryBattlingOthers {
	"There are some boys on Route 104\n"
	"who are watching over other convenient\l"
	"items for POKéMON to hold.$"
}

script PetalburgWoods_EventScript_Leaf0 {
	lockall
	applymovement (LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterLeft)
	waitmovement (0)
	addobject (LOCALID_PETALBURG_WOODS_LEAF)
	setobjectxy (LOCALID_PETALBURG_WOODS_LEAF, 6, 15)
	setvar (VAR_GENERIC_DUNGEON, 1)
	goto (PetalburgWoods_EventScript_Leaf2)
	end
}

script PetalburgWoods_EventScript_Leaf1 {
	lockall
	applymovement (LOCALID_PLAYER, Common_Movement_WalkInPlaceFasterLeft)
	waitmovement (0)
	addobject (LOCALID_PETALBURG_WOODS_LEAF)
	setobjectxy (LOCALID_PETALBURG_WOODS_LEAF, 6, 16)
	setvar (VAR_GENERIC_DUNGEON, 2)
	goto (PetalburgWoods_EventScript_Leaf2)
	end
}

script PetalburgWoods_EventScript_Leaf2 {
	applymovement (LOCALID_PETALBURG_WOODS_LEAF, PetalburgWoods_Movement_LeafApproach)
	waitmovement (0)
	trainerbattle_single (TRAINER_PETALBURG_WOODS_LEAF, PetalburgWoods_Text_LeafIntro, PetalburgWoods_Text_LeafDefeat, PetalburgWoods_EventScript_LeafPostBattle)
	releaseall
	end
}

script PetalburgWoods_EventScript_LeafPostBattle {
	setvar (B_LEVEL_CAP_VARIABLE, 15)
	setvar (VAR_PETALBURG_WOODS_STATE, 2)
	special (HealPlayerParty)
	msgbox (PetalburgWoods_Text_LeafLevelCap, MSGBOX_AUTOCLOSE)
	if (var(VAR_GENERIC_DUNGEON) == 1) {
		applymovement (LOCALID_PETALBURG_WOODS_LEAF, PetalburgWoods_Movement_LeafLeave0)
		waitmovement (0)
		removeobject (LOCALID_PETALBURG_WOODS_LEAF)
	}
	else {
		applymovement (LOCALID_PETALBURG_WOODS_LEAF, PetalburgWoods_Movement_LeafLeave1)
		waitmovement (0)
		removeobject (LOCALID_PETALBURG_WOODS_LEAF)
	}
	setvar (VAR_GENERIC_DUNGEON, 0)
	end
}

movement PetalburgWoods_Movement_LeafApproach {
	walk_up * 9
	walk_right * 5
	step_end
}

movement PetalburgWoods_Movement_LeafLeave0 {
	walk_down
	walk_right * 3
	walk_up * 2
}

movement PetalburgWoods_Movement_LeafLeave1 {
	walk_up
	walk_right * 3
	walk_up
}

text PetalburgWoods_Text_LeafIntro {
	"Hi {PLAYER}, good to see you again!\n"
	"Did you have any trouble finding your\l"
	"way through the woods?\p"
	"Oh? You ran in to TEAM AQUA? I hope\n"
	"they didn't give you too much trouble!\p"
	"A strong trainer like you should be able\n"
	"to handle a grunt no problem.\p"
	"Speaking of being a strong trainer, let's\n"
	"see if these woods toughened you up!$"
}

text PetalburgWoods_Text_LeafDefeat {
	"Wow, what a fight!$"
}

text PetalburgWoods_Text_LeafLevelCap {
	"Thanks for another great battle!\n"
	"I went ahead and healed your team for you,\l"
	"and your POKéMON will be able to level up\l"
	"more now.\p"
	"See you later!$"
}

script PetalburgWoods_EventScript_Mankey {
	msgbox (PetlaburgWoods_Text_Mankey, MSGBOX_DEFAULT)
	end
}

text PetlaburgWoods_Text_Mankey {
	"Monkey sounds$"
}
